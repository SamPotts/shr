!function(t){"use strict";var w,i={data:{},ttl:0},a={selector:"[data-shr-network]",count:{classname:"share-count",displayZero:!1,format:!0,position:"after",increment:!0,html:function(t,e,n){return'<span class="'+e+" "+e+"--"+n+'">'+t+"</span>"},value:{facebook:"share_count",github:"stargazers_count"},prefix:{github:"data"}},urls:{facebook:function(t){return"https://graph.facebook.com/?id="+t},pinterest:function(t){return"https://widgets.pinterest.com/v1/urls/count.json?url="+t},github:function(t,e){return"https://api.github.com/repos"+t+("string"==typeof e?"?access_token="+e:"")}},popup:{google:{width:500,height:500},facebook:{width:640,height:270},twitter:{width:640,height:240},pinterest:{width:750,height:550}},storage:{key:"shr",enabled:function(){try{var t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}(),ttl:3e5},tokens:{}},c=function(){};function f(t){return null==t||!t.length}function n(t,e,n){t&&function t(e,n,o,r){var i=n.split(" ");if(e instanceof NodeList)for(var a=0;a<e.length;a++)e[a]instanceof Node&&t(e[a],n,o,r);else for(var c=0;c<i.length;c++)e[r?"addEventListener":"removeEventListener"](i[c],o,!1)}(t,e,n,!0)}function e(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function l(t){switch(t.network){case"facebook":return e(t.link.search,"u");case"github":return t.link.pathname;default:return e(t.link.search,"url")}}function o(n,o){var t=function(t){if(t.network in w.urls)switch(t.network){case"github":return w.urls[t.network](l(t),w.tokens.github);default:return w.urls[t.network](encodeURIComponent(t.url))}return null}(n);if(!f(t)&&w.storage.enabled){var r=l(n);if(r in i.data&&n.network in i.data[r]&&i.ttl>Date.now())return void o.call(null,i.data[r][n.network])}f(t)||function(t,e){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(t){delete window[n],document.body.removeChild(o),e(t)};var o=document.createElement("script");o.setAttribute("src",t+(0<=t.indexOf("?")?"&":"?")+"callback="+n),document.body.appendChild(o)}(t,function(t){var e;w.storage.enabled&&(r in i.data||(i.data[r]={}),i.data[r][n.network]=t,e=i.data,w.storage.enabled&&(window.localStorage[w.storage.key]=JSON.stringify(e),window.localStorage[w.storage.key+"_ttl"]=Date.now()+w.storage.ttl)),o.call(null,t)})}function h(t){return t=Number(t),isNaN(t)?0:t}function r(t,e,n){var o,r;o=t.network,r=e,e=o in w.count.prefix?r[w.count.prefix[o]]:r;var i,a,c,l=0,s=t.link.getAttribute("data-shr-display");switch(t.network){case"facebook":e=e.share}if(l=h(l=f(s)?t.network in w.count.value?e[w.count.value[t.network]]:e.count:e[s]),t.count=l,n&&(t.display&&(l=h(t.display.innerText)),l++),0<l||w.count.displayZero){w.count.position=w.count.position.toLowerCase();var u,d="after"===w.count.position;u=w.count.format&&1e6<t.count?Math.round(l/1e6)+"M":w.count.format&&1e3<t.count?Math.round(l/1e3)+"K":(i=l,a=/\./.test(1.1.toLocaleString())?".":",",c=new RegExp("\\"+a+"\\d+$"),Math.round(i).toLocaleString().replace(c,"")),t.display?t.display.textContent=u:(t.link.insertAdjacentHTML(d?"afterend":"beforebegin",w.count.html(u,w.count.classname,w.count.position)),t.display=t.link[d?"nextSibling":"previousSibling"])}}function s(t){var e=this;return void 0===t?(c("No share link found."),!1):(e.link=t,e.network=t.getAttribute("data-shr-network"),e.url=l(e),o(e,function(t){r(e,t)}),n(e.link,"click",function(t){!function(t,e){if(e.network in w.popup){t.preventDefault();var n=w.popup[e.network],o=e.link.href,r=n.width,i=n.height,a="window-"+e.network;if(window[a]&&!window[a].closed)window[a].focus();else{var c=void 0!==window.screenLeft?window.screenLeft:screen.left,l=void 0!==window.screenTop?window.screenTop:screen.top,s=screen.width/2-r/2+c,u=screen.height/2-i/2+l;window[a]=window.open(o,e.network,"top="+u+",left="+s+",width="+r+",height="+i),window[a].focus()}window[a].opener=null}}(t,e),o(e,function(t){r(e,t,!0)},w.count.increment)}),e)}t.setup=function(t,e){"string"==typeof t?t=document.querySelectorAll(t):t instanceof HTMLElement?t=[t]:t instanceof NodeList||(void 0===e&&"object"==typeof t&&(e=t),t=document.querySelectorAll(a.selector)),(w=function t(e,n){for(var o in n)n[o]&&n[o].constructor&&n[o].constructor===Object?(e[o]=e[o]||{},t(e[o],n[o])):e[o]=n[o];return e}(a,e)).storage.enabled&&w.storage.key in window.localStorage&&(i={data:JSON.parse(window.localStorage[w.storage.key]),ttl:window.localStorage[w.storage.key+"_ttl"]});for(var n=t.length-1;0<=n;n--){var o=t[n];if(void 0===o.shr){var r=new s(o);o.shr=!!Object.keys(r).length&&r}}w.debug&&window.console&&(window.console.log.bind(console),c=window.console.error.bind(console))}}(window.shr=window.shr||{});